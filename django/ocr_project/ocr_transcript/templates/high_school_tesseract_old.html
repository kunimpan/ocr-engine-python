{% extends "base.html" %}

{% block title %}
    <title>‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤ TSR</title>
{% endblock title %}

{% block content %}
    <h3 class="text-center mt-3">‡∏£‡∏∞‡∏ö‡∏ö‡∏ñ‡∏≠‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡πÉ‡∏ö‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå TSR</h2>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="input-group mb-3">
            <label class="input-group-text" for="inputGroupFile01">‡πÉ‡∏ö‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ï‡πå</label>
            <input type="file" class="form-control" id="inputGroupFile01" name="file_uploads" multiple>
            <button class="btn btn-success" type="submit">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
        </div>
    </form>

    {% if messages %}
    <div>
        {% for message in messages %}
            <p style="color:
                {% if message.tags == 'success' %}green
                {% elif message.tags == 'warning' %}orange
                {% elif message.tags == 'error' %}red
                {% else %}black
                {% endif %};">
                {{ message }}
            </p>
        {% endfor %}
    </div>
    {% endif %}

    {% if saved_images %}
    <h3>‡πÑ‡∏ü‡∏•‡πå‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î:</h3>
    <div>
        {% for image_url in saved_images %}
            <div style="display: inline-block; margin: 10px; text-align: center;">
                <a href="{{ image_url }}" target="_blank">
                    <img src="{{ image_url }}" alt="Uploaded Image" style="width: 150px; height: auto; border-radius: 10px;">
                </a>
                <p><a href="{{ image_url }}" target="_blank">‡∏î‡∏π‡∏†‡∏≤‡∏û‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ï‡πá‡∏°</a></p>
            </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if json_url %}
        <a href="{% url 'download_json' %}" class="btn btn-primary" style="padding: 10px; background-color: blue; color: white; border-radius: 5px; text-decoration: none;">
            üì• ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î JSON
        </a>
    {% endif %}
    <br>

    {% if student_name %}
    <h4>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h4>
    <div style="margin-left: 20px;">
        <p style="margin-left: 20px;"><li><b>‡∏ä‡∏∑‡πà‡∏≠ : </b>{{student_name}}</li></p>
        <p style="margin-left: 20px;"><li><b>‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• : </b>{{student_lastname}}</li></p>
        <p style="margin-left: 20px;"><li><b>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï‡∏£‡∏ß‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå : </b>{{math_credits}}</li></p>
        <p style="margin-left: 20px;"><li><b>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏ß‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå : </b>{{math_grade}}</li></p>
        <p style="margin-left: 20px;"><li><b>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï‡∏£‡∏ß‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå : </b>{{science_credits}}</li></p>
        <p style="margin-left: 20px;"><li><b>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏ß‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå : </b>{{science_grade}}</li></p>
        <p style="margin-left: 20px;"><li><b>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏™‡∏∞‡∏™‡∏° : </b>{{gpa}}</li></p>
    </div>
    {% endif %}
    
    {% if combined_list %}
    <div style=>
        <h4 style="text-align: center;">‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤</h4>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤</th>
                    <th scope="col">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤</th>
                    <th scope="col">‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï</th>
                    <th scope="col">‡πÄ‡∏Å‡∏£‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</th>
                </tr>
            </thead>
            <tbody>
                {% for subject_code, subject_name, credit, grade in combined_list %}
                <tr>
                    <td>{{subject_code}}</td>
                    <td>{{subject_name}}</td>
                    <td>{{credit}}</td>
                    <td>{{grade}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

{% endblock content %}